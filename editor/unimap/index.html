<!DOCTYPE html>
<html>
<head>
    <title>TMK Keymap Editor</title>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.14.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="../common/keymap_editor.css" type="text/css">
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script>$.uiBackCompat = true;</script>
    <script src="https://code.jquery.com/ui/1.14.1/jquery-ui.js" integrity="sha256-9zljDKpE/mQxmaR4V2cGVaQ7arF3CcXxarvgr7Sj8Uc=" crossorigin="anonymous"></script>
    <!-- lz-string-1.3.3.js: LZString.decompress() runs away if given short string. -->
    <script src="../common/lz-string-1.0.2.js"></script>
    <script src="../common/base64.js"></script>
    <script src="config.js"></script>
    <script src="action.js"></script>
    <script src="keymap.js"></script>
    <script src="editor.js" type="module"></script>
</head>

<body>
<h1 id="page-title">TMK Keymap Editor</h1>

<h2 id="keymap-desc">Unknown</h2>
<div id="keyboard-pane" class="keyboard-pane">
    <form>
        <div id="layer_radio">
        <input type="radio" name="radio" class="layer" id="layer-0" checked="checked" /><label for="layer-0">Layer 0</label>
        <input type="radio" name="radio" class="layer" id="layer-1"/><label for="layer-1">Layer 1</label>
        <input type="radio" name="radio" class="layer" id="layer-2"/><label for="layer-2">Layer 2</label>
        <input type="radio" name="radio" class="layer" id="layer-3"/><label for="layer-3">Layer 3</label>
        <input type="radio" name="radio" class="layer" id="layer-4"/><label for="layer-4">Layer 4</label>
        <input type="radio" name="radio" class="layer" id="layer-5"/><label for="layer-5">Layer 5</label>
        <input type="radio" name="radio" class="layer" id="layer-6"/><label for="layer-6">Layer 6</label>
        <input type="radio" name="radio" class="layer" id="layer-7"/><label for="layer-7">Layer 7</label>
        </div>
    </form>


    <!--
    Keyboard keys
    -->
    <div id="keyboard-outline" class="keyboard-outline"></div>

    <p>Note: Just ignore keys your keyboard doesn't accommodate</p>
</div>


<h2>Action Codes</h2>
<div id="keycode_tabs" class="keycode_tabs">
    <ul>
    <li><a href="#tabs-main">Main</a></li>
    <li><a href="#tabs-other">Function and keypad</a></li>
    <li><a href="#tabs-special">System, Media and Mouse key</a></li>
    <li><a href="#tabs-layer">Layer Switching and etc.</a></li>
    <li><a href="#tabs-editor">Code Edit</a></li>
    </ul>

    <!-- Main -->
    <div id="tabs-main">
        <button class="action" id="code-0">NO</button>
        <button class="action" id="code-1">TRNS</button>
        <br>
        <br>

        <button class="action" id="code-4" title="A">A</button>
        <button class="action" id="code-5" title="B">B</button>
        <button class="action" id="code-6" title="C">C</button>
        <button class="action" id="code-7" title="D">D</button>
        <button class="action" id="code-8" title="E">E</button>
        <button class="action" id="code-9" title="F">F</button>
        <button class="action" id="code-10" title="G">G</button>
        <button class="action" id="code-11" title="H">H</button>
        <button class="action" id="code-12" title="I">I</button>
        <button class="action" id="code-13" title="J">J</button>
        <button class="action" id="code-14" title="K">K</button>
        <button class="action" id="code-15" title="L">L</button>
        <button class="action" id="code-16" title="M">M</button>
        <br>
        <button class="action" id="code-17" title="N">N</button>
        <button class="action" id="code-18" title="O">O</button>
        <button class="action" id="code-19" title="P">P</button>
        <button class="action" id="code-20" title="Q">Q</button>
        <button class="action" id="code-21" title="R">R</button>
        <button class="action" id="code-22" title="S">S</button>
        <button class="action" id="code-23" title="T">T</button>
        <button class="action" id="code-24" title="U">U</button>
        <button class="action" id="code-25" title="V">V</button>
        <button class="action" id="code-26" title="W">W</button>
        <button class="action" id="code-27" title="X">X</button>
        <button class="action" id="code-28" title="Y">Y</button>
        <button class="action" id="code-29" title="Z">Z</button>
        <br>
        <br>
        <button class="action" id="code-30" title="1">1</button>
        <button class="action" id="code-31" title="2">2</button>
        <button class="action" id="code-32" title="3">3</button>
        <button class="action" id="code-33" title="4">4</button>
        <button class="action" id="code-34" title="5">5</button>
        <button class="action" id="code-35" title="6">6</button>
        <button class="action" id="code-36" title="7">7</button>
        <button class="action" id="code-37" title="8">8</button>
        <button class="action" id="code-38" title="9">9</button>
        <button class="action" id="code-39" title="0">0</button>
        <br>
        <br>
        <button class="action" id="code-45" title="MINUS">MINUS</button>
        <button class="action" id="code-46" title="EQUAL">EQUAL</button>
        <button class="action" id="code-47" title="LBRACKET">LBRACKET</button>
        <button class="action" id="code-48" title="RBRACKET">RBRACKET</button>
        <button class="action" id="code-49" title="BSLASH">BSLASH</button>
        <button class="action" id="code-51" title="SCOLON">SCOLON</button>
        <button class="action" id="code-52" title="QUOTE">QUOTE</button>
        <button class="action" id="code-53" title="GRAVE">GRAVE</button>
        <button class="action" id="code-54" title="COMMA">COMMA</button>
        <button class="action" id="code-55" title="DOT">DOT</button>
        <button class="action" id="code-56" title="SLASH">SLASH</button>
        <br>
        <br>
        <button class="action" id="code-40" title="ENTER">ENTER</button>
        <button class="action" id="code-41" title="ESCAPE">ESCAPE</button>
        <button class="action" id="code-42" title="BackSpace">BSPACE</button>
        <button class="action" id="code-43" title="TAB">TAB</button>
        <button class="action" id="code-44" title="SPACE">SPACE</button>
        <button class="action" id="code-57" title="CAPSLOCK">CAPSLOCK</button>
        <button class="action" id="code-101" title="APPLICATION">APPLICATION</button>
        <button class="action" id="code-50" title="NONUS_HASH">NONUS_HASH</button>
        <button class="action" id="code-100" title="NONUS_BSLASH">NONUS_BSLASH</button>
        <br>
        <br>
        <button class="action" id="code-224" title="LCTRL">LCTRL</button>
        <button class="action" id="code-225" title="LSHIFT">LSHIFT</button>
        <button class="action" id="code-226" title="LALT">LALT</button>
        <button class="action" id="code-227" title="LGUI">LGUI</button>
        <button class="action" id="code-228" title="RCTRL">RCTRL</button>
        <button class="action" id="code-229" title="RSHIFT">RSHIFT</button>
        <button class="action" id="code-230" title="RALT">RALT</button>
        <button class="action" id="code-231" title="RGUI">RGUI</button>
        <br/>
    </div>

    <!-- Function and Navigation -->
    <div id="tabs-other">
        <button class="action" id="code-0">NO</button>
        <button class="action" id="code-1">TRNS</button>
        <br>
        <br>
        <button class="action" id="code-58" title="F1">F1</button>
        <button class="action" id="code-59" title="F2">F2</button>
        <button class="action" id="code-60" title="F3">F3</button>
        <button class="action" id="code-61" title="F4">F4</button>
        <button class="action" id="code-62" title="F5">F5</button>
        <button class="action" id="code-63" title="F6">F6</button>
        <button class="action" id="code-64" title="F7">F7</button>
        <button class="action" id="code-65" title="F8">F8</button>
        <button class="action" id="code-66" title="F9">F9</button>
        <button class="action" id="code-67" title="F10">F10</button>
        <button class="action" id="code-68" title="F11">F11</button>
        <button class="action" id="code-69" title="F12">F12</button>
        <br>
        <button class="action" id="code-104" title="F13">F13</button>
        <button class="action" id="code-105" title="F14">F14</button>
        <button class="action" id="code-106" title="F15">F15</button>
        <button class="action" id="code-107" title="F16">F16</button>
        <button class="action" id="code-108" title="F17">F17</button>
        <button class="action" id="code-109" title="F18">F18</button>
        <button class="action" id="code-110" title="F19">F19</button>
        <button class="action" id="code-111" title="F20">F20</button>
        <button class="action" id="code-112" title="F21">F21</button>
        <button class="action" id="code-113" title="F22">F22</button>
        <button class="action" id="code-114" title="F23">F23</button>
        <button class="action" id="code-115" title="F24">F24</button>
        <br>
        <br>
        <button class="action" id="code-70" title="PSCREEN">PSCREEN</button>
        <button class="action" id="code-71" title="SCROLLLOCK">SCROLLLOCK</button>
        <button class="action" id="code-72" title="PAUSE">PAUSE</button>
        <br>
        <br>
        <button class="action" id="code-73" title="INSERT">INSERT</button>
        <button class="action" id="code-74" title="HOME">HOME</button>
        <button class="action" id="code-75" title="PGUP">PGUP</button>
        <button class="action" id="code-76" title="DELETE">DELETE</button>
        <button class="action" id="code-77" title="END">END</button>
        <button class="action" id="code-78" title="PGDOWN">PGDOWN</button>
        <button class="action" id="code-80" title="LEFT">LEFT</button>
        <button class="action" id="code-81" title="DOWN">DOWN</button>
        <button class="action" id="code-82" title="UP">UP</button>
        <button class="action" id="code-79" title="RIGHT">RIGHT</button>
        <br>
        <br>
        Keypad:<br>
        <button class="action" id="code-83" title="NUMLOCK">NUMLOCK</button>
        <button class="action" id="code-84" title="KP_SLASH">KP_SLASH</button>
        <button class="action" id="code-85" title="KP_ASTERISK">KP_ASTERISK</button>
        <button class="action" id="code-86" title="KP_MINUS">KP_MINUS</button>
        <button class="action" id="code-87" title="KP_PLUS">KP_PLUS</button>
        <button class="action" id="code-88" title="KP_ENTER">KP_ENTER</button>
        <button class="action" id="code-99" title="KP_DOT">KP_DOT</button>
        <button class="action" id="code-103" title="KP_EQUAL">KP_EQUAL</button>
        <button class="action" id="code-133" title="KP_COMMA">KP_COMMA</button>
        <!--
        <button class="action" id="code-134" title="KP_EQUAL_AS400">KP_EQUAL_AS400</button>
        -->
        <br>
        <button class="action" id="code-89" title="KP_1">KP_1</button>
        <button class="action" id="code-90" title="KP_2">KP_2</button>
        <button class="action" id="code-91" title="KP_3">KP_3</button>
        <button class="action" id="code-92" title="KP_4">KP_4</button>
        <button class="action" id="code-93" title="KP_5">KP_5</button>
        <button class="action" id="code-94" title="KP_6">KP_6</button>
        <button class="action" id="code-95" title="KP_7">KP_7</button>
        <button class="action" id="code-96" title="KP_8">KP_8</button>
        <button class="action" id="code-97" title="KP_9">KP_9</button>
        <button class="action" id="code-98" title="KP_0">KP_0</button>
        <br>
        <br>
        Japanese:<br>
        <button class="action" id="code-135" title="INT1">INT1</button>
        <button class="action" id="code-136" title="INT2">INT2</button>
        <button class="action" id="code-137" title="INT3">INT3</button>
        <button class="action" id="code-138" title="INT4">INT4</button>
        <button class="action" id="code-139" title="INT5">INT5</button>
        <br>
        <br>
        Korean:<br>
        <button class="action" id="code-144" title="LANG1">LANG1</button>
        <button class="action" id="code-145" title="LANG2">LANG2</button>
        <br>
        <br>

        Mechanical Locking key support:<br>
        <button class="action" id="code-130" title="LOCKING_CAPS">LOCKING_CAPS</button>
        <button class="action" id="code-131" title="LOCKING_NUM">LOCKING_NUM</button>
        <button class="action" id="code-132" title="LOCKING_SCROLL">LOCKING_SCROLL</button>
    </div>

    <!-- Special key: System, Media and Mouse key -->
    <div id="tabs-special">
        <button class="action" id="code-0">NO</button>
        <button class="action" id="code-1">TRNS</button>
        <br>
        <br>

        System:<br>
        <button class="action" id="code-0x4081"></button>
        <button class="action" id="code-0x4082"></button>
        <button class="action" id="code-0x4083"></button>
        <br>

        Volume:<br>
        <button class="action" id="code-0x44E2"></button>
        <button class="action" id="code-0x44E9"></button>
        <button class="action" id="code-0x44EA"></button>
        <br>

        Media:<br>
        <button class="action" id="code-0x44B5"></button>
        <button class="action" id="code-0x44B6"></button>
        <button class="action" id="code-0x44B7"></button>
        <button class="action" id="code-0x44CD"></button>
        <button class="action" id="code-0x4583"></button>
        <button class="action" id="code-0x44CC"></button>
        <button class="action" id="code-0x44B3"></button>
        <button class="action" id="code-0x44B4"></button>
        <br>

        Application:<br>
        <button class="action" id="code-0x458A"></button>
        <button class="action" id="code-0x4592"></button>
        <button class="action" id="code-0x4594"></button>
        <br>

        Web:<br>
        <button class="action" id="code-0x4621"></button>
        <button class="action" id="code-0x4623"></button>
        <button class="action" id="code-0x4624"></button>
        <button class="action" id="code-0x4625"></button>
        <button class="action" id="code-0x4626"></button>
        <button class="action" id="code-0x4627"></button>
        <button class="action" id="code-0x462A"></button>
        <br>
        <br>

        Mouse key:<br>
        <button class="action" id="code-0x50F0"></button>
        <button class="action" id="code-0x50F1"></button>
        <button class="action" id="code-0x50F2"></button>
        <button class="action" id="code-0x50F3"></button>
        <br>
        <br>
        <button class="action" id="code-0x50F4"></button>
        <button class="action" id="code-0x50F5"></button>
        <button class="action" id="code-0x50F6"></button>
        <button class="action" id="code-0x50F7"></button>
        <button class="action" id="code-0x50F8"></button>
        <br>
        <br>
        <button class="action" id="code-0x50F9"></button>
        <button class="action" id="code-0x50FA"></button>
        <button class="action" id="code-0x50FB"></button>
        <button class="action" id="code-0x50FC"></button>
        <br>
        <br>
        <button class="action" id="code-0x50FD"></button>
        <button class="action" id="code-0x50FE"></button>
        <button class="action" id="code-0x50FF"></button>
        <br>
    </div>

    <!-- Layer -->
    <div id="tabs-layer">
        <button class="action" id="code-0">NO</button>
        <button class="action" id="code-1">TRNS</button>
        <br>
        <br>

        <!-- TODO: layer actions -->
        <u>Layer Actions:</u><a href="https://github.com/tmk/tmk_keyboard/wiki/Keymap#22-layer-action" target="_blank">[?]</a><br>
        Momentary Switch(enable a layer while holding down):<br>
        <button class="action" id="code-0xa0f1"></button>
        <button class="action" id="code-0xa1f1"></button>
        <button class="action" id="code-0xa2f1"></button>
        <button class="action" id="code-0xa3f1"></button>
        <button class="action" id="code-0xa4f1"></button>
        <button class="action" id="code-0xa5f1"></button>
        <button class="action" id="code-0xa6f1"></button>
        <button class="action" id="code-0xa7f1"></button>
        <br>
        Toggle(invert state of a layer):<br>
        <button class="action" id="code-0x8a01"></button>
        <button class="action" id="code-0x8a02"></button>
        <button class="action" id="code-0x8a04"></button>
        <button class="action" id="code-0x8a08"></button>
        <button class="action" id="code-0x8a21"></button>
        <button class="action" id="code-0x8a22"></button>
        <button class="action" id="code-0x8a24"></button>
        <button class="action" id="code-0x8a28"></button>
        <br>
        Set(enable a layer solely and disable other layers):<br>
        <button class="action" id="code-0x8d01"></button>
        <button class="action" id="code-0x8d02"></button>
        <button class="action" id="code-0x8d04"></button>
        <button class="action" id="code-0x8d08"></button>
        <button class="action" id="code-0x8d21"></button>
        <button class="action" id="code-0x8d22"></button>
        <button class="action" id="code-0x8d24"></button>
        <button class="action" id="code-0x8d28"></button>
        <br>
        Set/Clear(set a layer on press and clear all layers on release):<br>
        <button class="action" id="code-0xA0F3"></button>
        <button class="action" id="code-0xA1F3"></button>
        <button class="action" id="code-0xA2F3"></button>
        <button class="action" id="code-0xA3F3"></button>
        <button class="action" id="code-0xA4F3"></button>
        <button class="action" id="code-0xA5F3"></button>
        <button class="action" id="code-0xA6F3"></button>
        <button class="action" id="code-0xA7F3"></button>
        <br>
        Momentary Switch and Lock it by 5 taps:<br>
        <button class="action" id="code-0xa0f0"></button>
        <button class="action" id="code-0xa1f0"></button>
        <button class="action" id="code-0xa2f0"></button>
        <button class="action" id="code-0xa3f0"></button>
        <button class="action" id="code-0xa4f0"></button>
        <button class="action" id="code-0xa5f0"></button>
        <button class="action" id="code-0xa6f0"></button>
        <button class="action" id="code-0xa7f0"></button>
        <br>
        Default Layer Set:<br>
        <button class="action" id="code-0x8c01"></button>
        <button class="action" id="code-0x8c02"></button>
        <button class="action" id="code-0x8c04"></button>
        <button class="action" id="code-0x8c08"></button>
        <button class="action" id="code-0x8c21"></button>
        <button class="action" id="code-0x8c22"></button>
        <button class="action" id="code-0x8c24"></button>
        <button class="action" id="code-0x8c28"></button>
        <br>
        <br>

        <u>Built-in Commands:</u><br>
        Bootloader: <button class="action" id="code-0xE000"></button>
    </div>

    <!-- Code Editor -->
    <div id="tabs-editor">
        <select id="kind_dropdown"></select>
        <select id="key_mods_dropdown" class="editor_dropdown"></select>
        <select id="keycodes_dropdown" class="editor_dropdown"></select>
        <select id="layer_dropdown" class="editor_dropdown"></select>
        <select id="layer_mods_dropdown" class="editor_dropdown"></select>
        <select id="layer_part_dropdown" class="editor_dropdown"></select>
        <select id="layer_bits_dropdown" class="editor_dropdown"></select>
        <select id="layer_on_dropdown" class="editor_dropdown"></select>
        <select id="system_codes_dropdown" class="editor_dropdown"></select>
        <select id="consumer_codes_dropdown" class="editor_dropdown"></select>
        <select id="mousekey_codes_dropdown" class="editor_dropdown"></select>
        <select id="command_ids_dropdown" class="editor_dropdown"></select>
        <button class="action-apply" id="action-apply">Action Apply</button>
        <br>
        <br>
        Code(hex): <input id="code_hex" size="4" />
    </div>
</div>
<p>
See TMK wiki for <a href="https://github.com/tmk/tmk_keyboard/wiki#keymap" target="_blank">Keymap details</a> and
<a href="https://github.com/tmk/tmk_keyboard/wiki/Keymap-Editor" target="_blank">Keymap Editor usage</a>.<br>
</p>

<h3>Edited Firmware File:</h3>
<button id="firmware-download" title="save file">Download</button>
<a id="hex-download" style="display:none" ></a>
<button id="firmware-flash" title="flash firmware">Flash on Web</button>

<div>
<textarea id="flash-console" rows="10" cols="40" value="" readonly></textarea>
</div>

<h3>Base Firmware File:</h3>
You can select a product in the list or supply your own unimap firmware file.

<div>
<input type="radio" name="base-firm" class="base-firm" value="config" checked="checked" />
<label for="firm-config">Select </label>
<select id="firmware-dropdown" class="firmware-dropdown">
    <option value="none" selected>None</option>
</select>
</div>

<div>
<input type="radio" name="base-firm" class="base-firm" value="url" />
<label for="firm-url">URL </label>
<input id="firmwareURL" type="url" size="50"/>
<div id="firmwareURL_status" style="display:inline"></div>
</div>

<div>
<input type="radio" name="base-firm" class="base-firm" value="file" />
<label for="firm-file">File</label>
<input id="firmwareFile" type="file" accept=".hex"/>
</div>

<br/>
<button id="keymap-load" title="Load keymap from firmware. This replaces your editing keymap.">Load Keymap from firmware</button>
 WARN: This replaces your editing keymap.
<h3>Share URL:</h3>
<div id="share-url-display">
<textarea id="share-url" rows="10" cols="80" readonly></textarea>
<br/>
</div>
<button id="keymap-share" title="Raw URL">Raw URL</button>
<button id="shorten-url" title="URL Shortener">URL Shortener</button>

<h3>Keymap Output(for debug): <button id="debug-collapse" style="display:inline">&#9660;</button></h3>
<div id="debug-output" class="accordion">
<textarea id="keymap-output" rows="20" cols="80" readonly></textarea>
<br/>
<button id="keymap-json-generate" title="generate JSON">JSON</button>
<button id="keymap-source-generate" title="generate C source code">C source</button>
<button id="keymap-hex-generate" title="generate Hex">Hex</button>
<button id="keymap-encode" title="generate URL">encode URL</button>
<button id="keymap-decode" title="decode URL">decode URL</button>
</div>

</body>
</html>
